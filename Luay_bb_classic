--[[
    luayV2 UI LIBRARY - UPDATED (NO UICORNER / COMPACT / SIDEBARS)
    Desenvolvido por JoÃ£oPK
    ModificaÃ§Ãµes:
    - TODOS os UICorner removidos
    - GUI menor e mais compacta
    - Barra lateral fixa
    - Barra superior + barra inferior coloridas (tema dinÃ¢mico)
]]

local luayV2 = {}

-- [[ SERVIÃ‡OS ]] --
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TextService = game:GetService("TextService")

local plr = players.LocalPlayer
local mouse = plr:GetMouse()

-- [[ FUNÃ‡Ã•ES UTILITÃRIAS ]] --
local function Ripple(obj)
    obj.ClipsDescendants = true
    obj.MouseButton1Click:Connect(function()
        local ripple = Instance.new("Frame")
        ripple.Parent = obj
        ripple.BackgroundColor3 = Color3.new(1,1,1)
        ripple.BackgroundTransparency = 0.7
        ripple.BorderSizePixel = 0
        ripple.ZIndex = 10
        ripple.Size = UDim2.new(0,0,0,0)
        ripple.Position = UDim2.new(0, mouse.X - obj.AbsolutePosition.X, 0, mouse.Y - obj.AbsolutePosition.Y)
        ripple:TweenSizeAndPosition(
            UDim2.new(0,300,0,300),
            UDim2.new(0.5,-150,0.5,-150),
            Enum.EasingDirection.Out,
            Enum.EasingStyle.Quad,
            0.5
        )
        TweenService:Create(ripple, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
        task.delay(0.5, function() ripple:Destroy() end)
    end)
end

local function MakeDraggable(bar, frame)
    local dragging, dragStart, startPos
    bar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + delta.X,
                startPos.Y.Scale, startPos.Y.Offset + delta.Y
            )
        end
    end)
    UserInputService.InputEnded:Connect(function()
        dragging = false
    end)
end

-- [[ WINDOW ]] --
function luayV2:Window(config)
    local Window = {}
    Window.Color = config.Color or Color3.fromRGB(0,170,255)
    Window.Title = config.Name or "LUAY"

    local ScreenGui = Instance.new("ScreenGui", CoreGui)
    ScreenGui.Name = "luayV2_" .. HttpService:GenerateGUID(false)

    local Main = Instance.new("Frame", ScreenGui)
    Main.Size = UDim2.new(0, 260, 0, 320)
    Main.Position = UDim2.new(0.5, -130, 0.5, -160)
    Main.BackgroundColor3 = Color3.fromRGB(15,15,15)
    Main.BorderSizePixel = 0
    Main.ClipsDescendants = true

    -- Barra lateral
    local SideBar = Instance.new("Frame", Main)
    SideBar.Size = UDim2.new(0, 6, 1, 0)
    SideBar.BackgroundColor3 = Window.Color
    SideBar.BorderSizePixel = 0

    -- TopBar
    local TopBar = Instance.new("Frame", Main)
    TopBar.Size = UDim2.new(1, 0, 0, 38)
    TopBar.BackgroundColor3 = Color3.fromRGB(22,22,22)
    TopBar.BorderSizePixel = 0

    local TopLine = Instance.new("Frame", TopBar)
    TopLine.Size = UDim2.new(1,0,0,3)
    TopLine.Position = UDim2.new(0,0,1,-3)
    TopLine.BackgroundColor3 = Window.Color
    TopLine.BorderSizePixel = 0

    local Title = Instance.new("TextLabel", TopBar)
    Title.Size = UDim2.new(1,-60,1,0)
    Title.Position = UDim2.new(0,10,0,0)
    Title.Text = Window.Title:upper()
    Title.TextColor3 = Color3.new(1,1,1)
    Title.Font = Enum.Font.Code
    Title.TextSize = 14
    Title.TextXAlignment = Left
    Title.BackgroundTransparency = 1

    local Close = Instance.new("TextButton", TopBar)
    Close.Size = UDim2.new(0,30,0,30)
    Close.Position = UDim2.new(1,-35,0,4)
    Close.Text = "X"
    Close.Font = Enum.Font.Code
    Close.TextSize = 14
    Close.TextColor3 = Color3.fromRGB(255,80,80)
    Close.BackgroundTransparency = 1
    Close.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    MakeDraggable(TopBar, Main)

    -- Container
    local Container = Instance.new("Frame", Main)
    Container.Size = UDim2.new(1,-20,1,-55)
    Container.Position = UDim2.new(0,14,0,45)
    Container.BackgroundTransparency = 1

    -- Barra inferior colorida
    local BottomBar = Instance.new("Frame", Main)
    BottomBar.Size = UDim2.new(1,0,0,4)
    BottomBar.Position = UDim2.new(0,0,1,-4)
    BottomBar.BackgroundColor3 = Window.Color
    BottomBar.BorderSizePixel = 0

    function Window:Button(text, callback)
        local btn = Instance.new("TextButton", Container)
        btn.Size = UDim2.new(1,0,0,32)
        btn.BackgroundColor3 = Color3.fromRGB(25,25,25)
        btn.BorderSizePixel = 0
        btn.Text = "  "..text
        btn.TextColor3 = Color3.new(1,1,1)
        btn.Font = Enum.Font.Code
        btn.TextSize = 13
        btn.TextXAlignment = Left
        Ripple(btn)
        btn.MouseButton1Click:Connect(callback)
        return btn
    end

    return Window
end

return luayV2
